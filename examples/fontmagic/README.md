# Python BT82x Development Font Magic Example

[Back](../README.md)

## Font Magic Example

The `fontmagic.py` example demonstrates loading a custom font and using the `textzoom` and `textangle` widgets. See [snippets](../snippets/README.md) files documentation. It parses arguments and uses them to determine the display list for the BT82x.

The demo will write text on the BT82x screen using both a custom and ROM font. 

There are 3 modes of operation. The `standard`, `ascii` and `symbol` modes. 

In the standard mode, the text is written at an angle using the `cmd_textrotate` function, and scaled using the `cmd_textzoom` function. The ascii and symbol modes will characters from 32 to 127 for ascii and 0 to 95 available for symbol mode.

To make the scaling and rotation possible the program needs to know the widths of each character in the font. Therefore there is code that will read the font descriptors and calculate the widths of each character. This is stored in a python tuple called the font cache. This is initialised with the `getromfontinfo` function for ROM fonts and `getcustomfontinfo` for custom fonts.

![Font Magic Example](docs/fontmagic.png)

_Example code running in standard mode._

The demo mode (standard, ascii or symbol) is set as the first parameter in the command line, the second parameter sets the custom font to use. Other fonts can be used with this example code if the `.raw` file is generated by the EVE Asset Builder (EAB) utility.

Some fonts have their start address set in the EAB utility, this is used to load fonts into a specific location in RAM_G. This can be passed to the example code using the `-d` parameter. The default value is a start address of 0 (zero).

Legacy fonts typically start at character 0 or character 32, use the `-l` parameter to set this. The default value is 32. This is only used for legacy fonts.

### Running the Example

The format of the command call is as follows:

_MPSSE example:_
```
python fontmagic.py --connector ft232h standard assets/Roboto-BoldCondensed_32_L4.raw -d 0 -l 32
```

_FT4222 example in single mode (--mode 0):_

```
python fontmagic.py --connector ft4222module standard assets/Roboto-BoldCondensed_32_L4.raw 

```

_FT4222 example in dual mode (--mode 1) or quad mode (--mode 2):_

```
python fontmagic.py --connector ft4222module standard assets/Roboto-BoldCondensed_32_L4.raw 

```

## Files and Folders

The example contains a single file which comprises all the demo functionality. Additional resources for the demo are in the assets directory

| File/Folder | Description |
| --- | --- |
| [fontmagic.py](fontmagic.py) | Example source code file |
| [assets](assets) | Font file for demo |
| [docs](docs) | Documentation support files |
